\chapter{Proofs}
\label{chp:proofs}

\begin{theorem}[Associativity of the choice operator]
\label{thm:associativity_choice}
The choice operator $\vee$ has associative property, i.e. for any processes $P, Q, R \in \mathcal{P}$ with suitable type signatures, the following equivalence holds:
\begin{equation*}
  P \vee \left( Q \vee R \right) \equiv \left( P \vee Q \right) \vee R.
\end{equation*}
\end{theorem}

\begin{myproof}[Associativity of the choice operator]
Let $P, Q, R \in \mathcal{P}$ be processes with the type signature $\rho \left( P \right) = \rho \left( Q \right) = \rho \left( R \right) = \left( T_a, T_r \right)$ for some $a, r$ and $T_a, T_r \in \mathcal{T}$. Then $sem \left\langle P \vee \left( Q \vee R \right) \right\rangle = sem \left\langle \left( P \vee Q \right) \vee R \right\rangle$.
\begin{eqnarray*}
  sem \left\langle P \vee \left( Q \vee R \right) \right\rangle & \overset{\defref{def:sem_choice}}{=} & sem \left\langle P \right\rangle \cup sem \left\langle Q \vee R \right\rangle \\
  & \overset{\defref{def:sem_choice}}{=} & sem \left\langle P \right\rangle \cup \left( sem \left\langle Q \right\rangle \cup sem \left\langle R \right\rangle \right) \\
  & \overset{associativity \ of \ \cup}{=} & sem \left\langle P \right\rangle \cup sem \left\langle Q \right\rangle \cup sem \left\langle R \right\rangle \\
  & \overset{associativity \ of \ \cup}{=} & \left( sem \left\langle P \right\rangle \cup sem \left\langle Q \right\rangle \right) \cup sem \left\langle R \right\rangle \\
  & \overset{\defref{def:sem_choice}}{=} & sem \left\langle P \vee Q \right\rangle \cup sem \left\langle R \right\rangle \\
  & \overset{\defref{def:sem_choice}}{=} & sem \left\langle \left( R \vee Q \right) \vee R \right\rangle
\end{eqnarray*}
The associative property of set union $\cup$ is transferred to the choice operator $\vee$ and hence, \thmref{thm:associativity_choice} holds.

\hfill$\blacksquare$
\end{myproof}

\begin{theorem}[Associativity of the parallel operator]
\label{thm:associativity_parallel}
The parallel operator $|$ has associative property, i.e. for any processes $P, Q, R \in \mathcal{P}$ with suitable type signatures, the following equivalence holds:
\begin{equation*}
  P \,| \left( Q \,|\, R \right) \equiv \left( P \,|\, Q \right) |\, R.
\end{equation*}
\end{theorem}

\begin{myproof}[Associativity of the parallel operator]
Let $P, Q, R \in \mathcal{P}$ be processes with the type signature $\rho \left( P \right) = \rho \left( Q \right) = \rho \left( R \right) = \left( T_a, T_r \right)$ for some $a, r$ and $T_a, T_r \in \mathcal{T}$. Let $\left( T_r, \star \right)$ be a semi-group with the commutative binary operation $\star \star T_r \times T_r \to T_r$. Then $sem \left\langle P \,| \left( Q \,|\, R \right) \right\rangle = sem \left\langle \left( P \,|\, Q \right) |\, R \right\rangle$.
\begin{eqnarray*}
  sem \left\langle P \,| \left( Q \,|\, R \right) \right\rangle & \overset{\defref{def:sem_parallel}}{=} & \left\{ p \star u \,|\, p \in sem \left\langle P \right\rangle, u \in sem \left\langle Q \,|\, R \right\rangle \right\} \\
  & \overset{\defref{def:sem_parallel}}{=} & \left\{ p \star u \,|\, p \in sem \left\langle P \right\rangle, u \in \left\{q \star r \,|\, q \in sem \left\langle Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \right\} \\
  & \overset{substitution \ of \ u}{=} & \left\{ p \star \left( q \star r \right) \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{associativity \ of \  \star}{=} & \left\{ p \star q \star r \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{associativity \ of \  \star}{=} & \left\{ \left( p \star q \right) \star r \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{introduction \ of \ v}{=} & \left\{ v \star r \,|\, v \in \left\{ p \star q \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle \right\}, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{\defref{def:sem_parallel}}{=} & \left\{ v \star r \,|\, v \in sem \left\langle P \,|\, Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{\defref{def:sem_parallel}}{=} & sem \left\langle \left( P \,|\, Q \right) |\, R \right\rangle
\end{eqnarray*}
The associative property of $\star$ is transferred to the parallel operator $|$ and hence, \thmref{thm:associativity_parallel} holds.

\hfill$\blacksquare$
\end{myproof}

\begin{theorem}[Associativity of the sequence operator]
\label{thm:associativity_sequence}
The sequence operator $\triangleright$ has associative property, i.e. for any processes $P, Q, R \in \mathcal{P}$ with suitable type signatures, the following equivalence holds:
\begin{equation*}
  P \triangleright \left( Q \triangleright R \right) \equiv \left( P \triangleright Q \right) \triangleright R.
\end{equation*}
\end{theorem}

\begin{myproof}[Associativity of the sequence operator]
Let $P, Q, R \in \mathcal{P}$ be processes with the type signature $\rho \left( P \right) = \rho \left( Q \right) = \rho \left( R \right) = \left( T_a, T_r \right)$ for some $a, r$ and $T_a, T_r \in \mathcal{T}$. Then $sem \left\langle P \triangleright \left( Q \triangleright R \right) \right\rangle = sem \left\langle \left( P \triangleright Q \right) \triangleright R \right\rangle$. Recall that $\circ$ is the associative operation of function composition.
\begin{eqnarray*}
  sem \left\langle P \triangleright \left( Q \triangleright R \right) \right\rangle & \overset{\defref{def:sem_sequence}}{=} & \left\{ u \circ p \,|\, p \in sem \left\langle P \right\rangle, u \in sem \left\langle Q \triangleright R \right\rangle \right\} \\
  & \overset{\defref{def:sem_sequence}}{=} & \left\{ u \circ p \,|\, p \in sem \left\langle P \right\rangle, u \in \left\{r \circ q \,|\, q \in sem \left\langle Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \right\} \\
  & \overset{substitution \ of \ u}{=} & \left\{ \left( r \circ q \right) \circ p \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{associativity \ of \  \circ}{=} & \left\{ r \circ q \circ p \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{associativity \ of \  \circ}{=} & \left\{ r \circ \left( q \circ p \right) \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{introduction \ of \ v}{=} & \left\{ r \circ v \,|\, v \in \left\{ q \circ p \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle \right\}, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{\defref{def:sem_sequence}}{=} & \left\{ r \circ v \,|\, v \in sem \left\langle P \triangleright Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{\defref{def:sem_sequence}}{=} & sem \left\langle \left( P \triangleright Q \right) \triangleright R \right\rangle
\end{eqnarray*}
The associative property of function composition $\circ$ is transferred to the sequence operator $\triangleright$ and hence, \thmref{thm:associativity_sequence} holds.

\hfill$\blacksquare$
\end{myproof}

\begin{theorem}[Distributivity of parallel over choice]
\label{thm:distributivity_parallel_choice}
The parallel operator $|$ distributes over the choice operator $\vee$, i.e. for any processes $P, Q, R \in \mathcal{P}$ with suitable type signatures, the following equivalence holds:
\begin{equation*}
  P \,| \left( Q \vee R \right) \equiv \left( P \,|\, Q \right) \vee \left( P \,|\, R \right).
\end{equation*}
\end{theorem}

\begin{myproof}[Distributivity of parallel over choice]
Let $P, Q, R \in \mathcal{P}$ be processes with the type signatures $\rho \left( P \right) = \rho \left( Q \right) = \rho \left( R \right) = \left( T_a, T_r \right)$ for some $a, r$ and $T_a, T_r \in \mathcal{T}$. Let $\left( T_r, \star \right)$ be a semi-group with the commutative binary operation $\star \colon T_r \times T_r \to T_r$. Then $sem \left\langle P \,| \left( Q \vee R \right) \right\rangle = sem \left\langle \left( P \,|\, Q \right) \vee \left( P \,|\, R \right) \right\rangle$.
\begin{eqnarray*}
  sem \left\langle P \,| \left( Q \vee R \right) \right\rangle & \overset{\defref{def:sem_parallel}}{=} & \left\{ p \star u \,|\, p \in sem \left\langle P \right\rangle, u \in sem \left\langle Q \vee R \right\rangle \right\} \\
  & \overset{\defref{def:sem_choice}}{=} & \left\{ p \star u \,|\, p \in sem \left\langle P \right\rangle, u \in sem \left\langle Q \right\rangle \cup sem \left\langle R \right\rangle \right\} \\
  & \overset{distributivity \ of \ \cup}{=} & \hspace*{0.8em} \left\{ p \star q \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle \right\} \\
  & & \cup \left\{ p \star r \,|\, p \in sem \left\langle P \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{\defref{def:sem_parallel}}{=} & sem \left\langle P \,|\, Q \right\rangle \cup sem \left\langle P \,|\, R \right\rangle \\
  & \overset{\defref{def:sem_choice}}{=} & sem \left\langle \left( P \,|\, Q \right) \vee \left( P \,|\, R \right) \right\rangle
\end{eqnarray*}
The distributivity of set union $\cup$ is transferred to the choice operator $\vee$ and hence, \thmref{thm:distributivity_parallel_choice} holds.

\hfill$\blacksquare$
\end{myproof}

\begin{theorem}[Distributivity of sequence over choice]
\label{thm:distributivity_sequence_choice}
The sequence operator $\triangleright$ distributes over the choice operator $\vee$, i.e. for any processes $P, Q, R \in \mathcal{P}$ with suitable type signatures, the following equivalence holds:
\begin{equation*}
  P \triangleright \left( Q \vee R \right) \equiv \left( P \triangleright Q \right) \vee \left( P \triangleright R \right).
\end{equation*}
\end{theorem}

\begin{myproof}[Distributivity of sequence over choice]
Let $P, Q, R \in \mathcal{P}$ be processes with the type signatures $\rho \left( P \right) = \left( T_a, T_x \right)$ and $\rho \left( Q \right) = \rho \left( R \right) = \left( T_x, T_r \right)$ for some $a, r, x$ and $T_a, T_r, T_x \in \mathcal{T}$. Then $sem \left\langle P \triangleright \left( Q \vee R \right) \right\rangle = sem \left\langle \left( P \triangleright Q \right) \vee \left( P \triangleright R \right) \right\rangle$.
\begin{eqnarray*}
  sem \left\langle P \triangleright \left( Q \vee R \right) \right\rangle & \overset{\defref{def:sem_sequence}}{=} & \left\{ u \circ p \,|\, p \in sem \left\langle P \right\rangle, u \in sem \left\langle Q \vee R \right\rangle \right\} \\
  & \overset{\defref{def:sem_choice}}{=} & \left\{ u \circ p \,|\, p \in sem \left\langle P \right\rangle, u \in sem \left\langle Q \right\rangle \cup sem \left\langle R \right\rangle \right\} \\
  & \overset{distributivity \ of \ \cup}{=} & \left\{ q \circ p, r \circ p \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{set \ equivalence}{=} & \hspace*{0.8em} \left\{ q \circ p \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle \right\} \\  
  & & \cup \left\{ r \circ p \,|\, p \in sem \left\langle P \right\rangle, r \in sem \left\langle R \right\rangle \right\} \\
  & \overset{\defref{def:sem_sequence}}{=} & sem \left\langle P \triangleright Q \right\rangle \cup sem \left\langle P \triangleright R \right\rangle \\
  & \overset{\defref{def:sem_choice}}{=} & sem \left\langle \left( P \triangleright Q \right) \vee \left( P \triangleright R \right) \right\rangle
\end{eqnarray*}
The distributivity of set union $\cup$ is transferred to the choice operator $\vee$ and hence, \thmref{thm:distributivity_sequence_choice} holds.

\hfill$\blacksquare$
\end{myproof}

\begin{theorem}[Distributivity of sequence over parallel]
\label{thm:distributivity_sequence_parallel}
The sequence operator $\triangleright$ distributes over the parallel operator $|$, i.e. for any processes $P, Q, R \in \mathcal{P}$ with suitable type signatures, the following equivalence holds:
\begin{equation*}
  P \triangleright \left( Q \,|\, R \right) \equiv \left( P \triangleright Q \right) \,|\, \left( P \triangleright R \right). 
\end{equation*}
\end{theorem}

\begin{myproof}[Distributivity of sequence over parallel]
Let $P, Q, R \in \mathcal{P}$ be processes with the type signatures $\rho \left( P \right) = \left( T_a, T_x \right)$ and $\rho \left( Q \right) = \rho \left( R \right) = \left( T_x, T_r \right)$ for some $a, r, x$ and $T_a, T_r, T_x \in \mathcal{T}$. Let $\left( T_r, \star \right)$ be a semi-group with the commutative binary operation $\star \colon T_r \times T_r \to T_r$. Then $sem \left\langle P \triangleright \left( Q \,|\, R \right) \right\rangle = sem \left\langle \left( P \triangleright Q \right) | \left( P \triangleright R \right) \right\rangle$.
\begin{eqnarray*}
  sem \left\langle P \triangleright \left( Q \,|\, R \right) \right\rangle & \overset{\defref{def:sem_sequence}}{=} & \left\{ u \circ p \,|\, p \in sem \left\langle P \right\rangle, u \in sem \left\langle Q \,|\, R \right\rangle \right\} \\
  & \overset{\defref{def:sem_parallel}}{=} & \left\{ u \circ p \,|\, p \in sem \left\langle P \right\rangle, u \in \left\{q \star r \,|\, q \in sem \left\langle Q \right\rangle, r \in \left\langle R \right\rangle \right\} \right\} \\
  & \overset{flattening \ set}{=} & \left\{ \left( q \star r \right) \circ p \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle, r \in \left\langle R \right\rangle \right\} \\
  & \overset{???}{=} & \left\{ \left( q \circ p \right) \star \left( r \circ p \right) \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle, r \in \left\langle R \right\rangle \right\} \\
  & \overset{\defref{def:sem_sequence}}{=} & \left\{ v \star w \,|\, v \in sem \left\langle P \triangleright Q \right\rangle, w \in sem \left\langle P \triangleright R \right\rangle \right\} \\
  & \overset{\defref{def:sem_parallel}}{=} & sem \left\langle \left( P \triangleright Q \right) | \left( P \triangleright R \right) \right\rangle
\end{eqnarray*}
ToDo: $\circ$ needs to distribute over $\star$, $\star$ needs to operate on \textbf{functions}!
\end{myproof}

\begin{theorem}[Commutativity of the choice operator]
\label{thm:commutativity_choice}
The choice operator $\vee$ has commutative properties, i.e. for any processes $P, Q \in \mathcal{P}$ with suitable type signatures, the following equivalence holds:
\begin{equation*}
  P \vee Q \equiv Q \vee P.
\end{equation*}
\end{theorem}

\begin{myproof}[Commutativity of the choice operator]
Let $P, Q \in \mathcal{P}$ be processes with the type signatures $\rho \left( P \right) = \rho \left( Q \right) = \left( T_a, T_r \right)$ for some $a, r$ and $T_a, T_r \in \mathcal{T}$. Then $sem \left\langle P \vee Q \right\rangle = sem \left\langle Q \vee P \right\rangle$.
\begin{eqnarray*}
  sem \left\langle P \vee Q \right\rangle & \overset{\defref{def:sem_choice}}{=} & sem \left\langle P \right\rangle \cup sem \left\langle Q \right\rangle \\
  & \overset{commutativity \ of \ \cup}{=} & sem \left\langle Q \right\rangle \cup sem \left\langle P \right\rangle \\
  & \overset{\defref{def:sem_choice}}{=} & sem \left\langle Q \vee P \right\rangle
\end{eqnarray*}
The commutative property of set union $\cup$ is transferred to the choice operator $\vee$ and hence, \thmref{thm:commutativity_choice} holds.

\hfill$\blacksquare$
\end{myproof}

\begin{theorem}[Commutativity of the parallel operator]
\label{thm:commutativity_parallel}
The parallel operator $|$ has commutative properties, i.e. for any processes $P, Q \in \mathcal{P}$ with suitable type signatures, the following equivalence holds:
\begin{equation*}
  P \,|\, Q \equiv Q \,|\, P.
\end{equation*}
\end{theorem}

\begin{myproof}[Commutativity of the parallel operator]
Let $P, Q \in \mathcal{P}$ be processes with the type signatures $\rho \left( P \right) = \rho \left( Q \right) = \left( T_a, T_r \right)$ for some $a, r$ and $T_a, T_r \in \mathcal{T}$. Let $\left( T_r, \star \right)$ be a semi-group with the commutative binary operation $\star \colon T_r \times T_r \to T_r$. Then $sem \left\langle P \,|\, Q \right\rangle = sem \left\langle Q \,|\, P \right\rangle$.
\begin{eqnarray*}
  sem \left\langle P \,|\, Q \right\rangle & \overset{\defref{def:sem_parallel}}{=} & \left\{ p \star q \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle \right\} \\
  & \overset{commutativity \ of \ \star}{=} & \left\{ q \star p \,|\, p \in sem \left\langle P \right\rangle, q \in sem \left\langle Q \right\rangle \right\} \\
  & \overset{\defref{def:sem_parallel}}{=} & sem \left\langle Q \,|\, P \right\rangle
\end{eqnarray*}
The commutative property of $\star$ is transferred to the parallel operator $|$ and hence, \thmref{thm:commutativity_parallel} holds.

\hfill$\blacksquare$
\end{myproof}

\begin{theorem}[Idempotence of the choice operator]
\label{thm:idempotence_choice}
When combining a process with itself using the choice operator $\vee$, it shows idempotence properties, i.e. for any process $P \in \mathcal{P}$, the following equivalence holds:
\begin{equation*}
  P \vee P \equiv P.
\end{equation*}
\end{theorem}

\begin{myproof}[Idempotence of the choice operator]
Let $P \in \mathcal{P}$ be a process, then $sem \left\langle P \vee P \right\rangle = sem \left\langle P \right\rangle$.
\begin{eqnarray*}
  sem \left\langle P \vee P \right\rangle & \overset{\defref{def:sem_choice}}{=} & sem \left\langle P \right\rangle \cup sem \left\langle P \right\rangle \\
  & \overset{union\ of\ equal\ sets}{=} & sem \left\langle P \right\rangle
\end{eqnarray*}
The idempotence property of $\cup$ for equal sets is transferred to the choice operator $\vee$ and hence, \thmref{thm:idempotence_choice} holds.

\hfill$\blacksquare$
\end{myproof}

\begin{theorem}[Idempotence of the sequence operator respecting the identity process]
\label{thm:idempotence_identity}
When the identity process $Id$ combined with itself sequentially, the resulting process is the identity process $Id$. The sequence operator is idempotent respecting the identity process:
\begin{equation*}
  Id \triangleright Id \equiv Id.
\end{equation*}
\end{theorem}

\begin{myproof}[Idempotence of the sequence operator respecting the identity process]
Let $Id \in \mathcal{P}$ be the identity process and use the sequence operator $\triangleright$ to compose it with itself. Then $sem \left\langle Id \triangleright Id \right\rangle = sem \left\langle Id \right\rangle$.
\begin{eqnarray*}
  sem \left\langle Id \triangleright Id \right\rangle & \overset{\defref{def:sem_id}}{=} & \left\{ \left( x \mapsto x \right) \circ \left( x \mapsto x \right) \right\} \\
  & \overset{function \ composition}{=} & \left\{ x \mapsto x \right\} \\
  & \overset{\defref{def:sem_id}}{=} & sem \left\langle Id \right\rangle
\end{eqnarray*}
The idempotence property of function composition $\circ$ respecting the identity function is transferred to sequential process composition $\triangleright$ and hence, \thmref{thm:idempotence_identity} holds.

\hfill$\blacksquare$
\end{myproof}

\begin{myproof}[Idempotence of the error process respecting the sequence operator]
\end{myproof}

\begin{myproof}[Idempotence of the \textsc{Kleene} star]
\end{myproof}

% ToDo: neutral elements